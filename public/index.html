<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VSPORT</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { width: 100%; height: 100%; overflow: hidden; background: #000; }
  iframe {
    display: block;
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }
  #loader {
    position: fixed; inset: 0; z-index: 10;
    background: #020c18;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center; gap: 20px;
    font-family: 'Courier New', monospace;
    color: #29b6f6;
  }
  .spinner {
    width: 50px; height: 50px; border-radius: 50%;
    border: 3px solid #0d2d50;
    border-top-color: #29b6f6;
    border-right-color: #00e676;
    animation: spin 0.7s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .load-text { font-size: 0.8rem; letter-spacing: 0.3em; opacity: 0.7; }
</style>
</head>
<body>

<div id="loader">
  <div class="spinner"></div>
  <div class="load-text">BETÖLTÉS...</div>
</div>

<iframe
  id="main"
  scrolling="no"
  allowfullscreen
  allow="fullscreen; autoplay"
></iframe>

<script>
  const DIRECT = 'https://vfscigaming.aitcloud.de/vflmshop/retail/index?clientid=4997&lang=zh&style=scigamingcdn&screen=betradar_vflm_one_screen&channel=0';
  const PROXY  = '/proxy/vflmshop/retail/index?clientid=4997&lang=zh&style=scigamingcdn&screen=betradar_vflm_one_screen&channel=0';

  const frame  = document.getElementById('main');
  const loader = document.getElementById('loader');

  let loaded = false;

  frame.onload = () => {
    if (loaded) return;
    try {
      // If cross-origin loaded fine, this throws — that means it worked
      const loc = frame.contentWindow.location.href;
      // If we can read href and it's blank, something went wrong
      if (loc === 'about:blank') return;
    } catch(e) {
      // Cross-origin = loaded successfully
    }
    loaded = true;
    loader.style.display = 'none';
  };

  // Try direct first
  frame.src = DIRECT;

  // If not loaded in 5s, switch to proxy
  setTimeout(() => {
    if (!loaded) {
      frame.src = PROXY;
      // Give proxy 10s
      setTimeout(() => {
        if (!loaded) loader.innerHTML = '<div style="color:#ff6060;font-family:monospace;text-align:center;padding:20px">⚠️ Nem sikerült betölteni.<br><br><a href="' + DIRECT + '" target="_blank" style="color:#29b6f6">Megnyitás új lapon →</a></div>';
      }, 10000);
    }
  }, 5000);
</script>
</body>
</html>
