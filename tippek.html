<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VSPORT â€“ AI TeljesÃ­tmÃ©ny TÃ¡bla</title>
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { background: #0a0a0a; color: #fff; font-family: 'Segoe UI', sans-serif; min-height: 100vh; }

    header {
      background: #111; border-bottom: 2px solid #222;
      padding: 0 20px; height: 44px;
      display: flex; align-items: center; gap: 10px;
      position: sticky; top: 0; z-index: 100;
    }
    .dot { width: 9px; height: 9px; border-radius: 50%; background: #fff; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.25} }
    header h1 { font-size:.85rem; font-weight:600; letter-spacing:3px; text-transform:uppercase; color:#ddd; }
    .back-btn {
      display: flex; align-items: center; gap: 5px;
      color: #888; font-size: .75rem; text-decoration: none;
      padding: 5px 10px; border: 1px solid #222; border-radius: 4px;
      transition: all .15s;
    }
    .back-btn:hover { color: #fff; border-color: #444; }
    .header-sep { width: 1px; height: 18px; background: #222; margin: 0 5px; }

    .page { max-width: 900px; margin: 0 auto; padding: 20px 16px 40px; }

    .tabs {
      display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 1px solid #222;
      padding-bottom: 10px;
    }
    .tab {
      background: none; border: none; color: #666; font-size: .8rem;
      padding: 5px 15px; cursor: pointer; transition: all .15s;
      text-transform: uppercase; letter-spacing: 1px;
    }
    .tab:hover { color: #aaa; }
    .tab.active {
      color: #4caf50; border-bottom: 2px solid #4caf50; position: relative; top: 2px;
    }

    .ai-badge {
      background: #1e6b1e; color: #fff; font-size: .6rem;
      padding: 2px 8px; border-radius: 3px; margin-left: 10px;
      animation: pulse 2s infinite;
    }

    /* Leaderboard tÃ¡blÃ¡zat - PONTOSAN UGYANAZ, MINT AZ INDEX.HTML-BEN */
    .leaderboard-block { background:#111; border:1px solid #2a2a2a; border-radius:4px; overflow:hidden; margin-bottom: 20px; }
    .leaderboard-header-bar {
      background:#1e6b1e;
      display:grid;
      grid-template-columns: 26px 16px 1fr 80px 46px 36px;
      align-items:center; padding:7px 10px; gap:4px;
    }
    .leaderboard-header-bar span { font-size:.58rem; font-weight:700; color:#fff; text-transform:uppercase; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .leaderboard-header-bar .h-right { text-align:right; }

    .lb-meta {
      background:#0f0f0f; border-bottom:1px solid #1e1e1e;
      padding:4px 10px; font-size:.6rem; color:#444;
      display:flex; justify-content:space-between; align-items:center;
    }
    .refresh-dot { width:5px; height:5px; border-radius:50%; background:#3d8b3d; display:inline-block; margin-right:4px; animation:pulse 2s infinite; }
    .lb-meta.loading .refresh-dot { background:#f59e0b; }
    .lb-meta.error   .refresh-dot { background:#e53935; }

    .leaderboard-body { background:#141414; }

    .lb-row {
      display:grid;
      grid-template-columns: 26px 16px 1fr 80px 46px 36px;
      align-items:center; padding:4px 10px; gap:4px;
      border-bottom:1px solid #1d1d1d; transition:background .12s;
    }
    .lb-row:last-child { border-bottom:none; }
    .lb-row:hover { background:#1c1c1c; }
    .lb-row.top3 { background:#162316; }
    .lb-row.top3:hover { background:#1c2b1c; }
    .lb-row.relegation { background:#1a1010; }
    .lb-row.relegation:hover { background:#231414; }

    .col-pos { font-size:.7rem; font-weight:700; color:#666; text-align:center; }
    .lb-row.top3 .col-pos { color:#4caf50; }
    .lb-row.relegation .col-pos { color:#e53935; }

    .col-trend { display:flex; align-items:center; justify-content:center; }
    .trend-up   { color:#4caf50; font-size:.55rem; }
    .trend-down { color:#e53935; font-size:.55rem; }
    .trend-same { color:#333;    font-size:.55rem; }

    .col-team { display:flex; align-items:center; gap:6px; }
    .team-logo { width:16px; height:16px; object-fit:contain; flex-shrink:0; }
    .team-logo-placeholder { width:16px; height:16px; flex-shrink:0; background:#1a1a1a; border-radius:50%; }
    .team-name { font-size:.76rem; font-weight:600; color:#ccc; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .col-goals { font-size:.68rem; color:#666; text-align:right; font-variant-numeric:tabular-nums; }
    .col-gd { font-size:.65rem; color:#555; text-align:right; font-variant-numeric:tabular-nums; }
    .col-pts { font-size:.8rem; font-weight:800; color:#fff; text-align:right; font-variant-numeric:tabular-nums; }

    /* AI ElemzÃ©s panel */
    .aipanel {
      background: #111; border: 1px solid #2a2a2a; border-radius: 4px;
      overflow: hidden; margin-top: 20px;
    }
    .aipanel.show { display: block; }
    .aipanel-hdr {
      background: #1a1a1a; border-bottom: 1px solid #2a2a2a;
      padding: 10px 16px; display: flex; align-items: center; gap: 10px;
    }
    .aipanel-title {
      font-size: .8rem; font-weight: 600; letter-spacing: 1px;
      text-transform: uppercase; color: #ddd;
    }
    .aibody {
      padding: 16px 20px; font-size: .82rem; line-height: 1.7;
      color: #ccc; min-height: 100px;
    }

    .dots { display: flex; gap: 5px; padding: 10px 0; justify-content: center; }
    .dots span {
      width: 6px; height: 6px; border-radius: 50%; background: #4caf50;
      opacity: .4; animation: d 1s infinite;
    }
    .dots span:nth-child(2){ animation-delay:.2s; }
    .dots span:nth-child(3){ animation-delay:.4s; }
    @keyframes d { 0%,100%{opacity:.4} 50%{opacity:1} }

    .error-box {
      background: rgba(229, 57, 53, 0.1); border: 1px solid rgba(229, 57, 53, 0.2);
      border-radius: 4px; padding: 12px 16px; font-size: .78rem;
      color: #ff8a80; margin-bottom: 16px; display: none;
    }
    .error-box.show { display: block; }

    .btn {
      background: #1a1a1a; border: 1px solid #333; color: #aaa;
      font-size: .7rem; padding: 5px 12px; border-radius: 4px;
      cursor: pointer; transition: all .15s;
    }
    .btn:hover { background: #242424; border-color: #555; color: #fff; }
  </style>
</head>
<body>

<header>
  <a class="back-btn" href="/">â† Vissza</a>
  <div class="header-sep"></div>
  <div class="dot"></div>
  <h1>VSPORT &mdash; AI TeljesÃ­tmÃ©ny TÃ¡bla</h1>
</header>

<div class="page">
  <!-- Tabok a vÃ¡ltÃ¡shoz -->
  <div class="tabs">
    <button class="tab active" id="realTab" onclick="showRealTable()">ğŸ“Š ValÃ³di tabella</button>
    <button class="tab" id="aiTab" onclick="showAITable()">ğŸ¤– AI elemzett tabella</button>
  </div>

  <!-- VALÃ“DI TÃBLÃZAT -->
  <div id="realTableContainer">
    <div class="form-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px">
      <div class="title-section">
        <h2>âš¡ Premier Liga - Ã‰lÅ‘ tabella</h2>
      </div>
      <button class="btn" id="refreshRealBtn">ğŸ”„ FrissÃ­tÃ©s</button>
    </div>

    <div class="leaderboard-block">
      <div class="leaderboard-header-bar">
        <span>#</span>
        <span></span>
        <span>Csapat</span>
        <span class="h-right">LÅ‘ttâ€“Kapott</span>
        <span class="h-right">KÃ¼lÃ¶nb.</span>
        <span class="h-right">Pont</span>
      </div>
      <div class="lb-meta loading" id="realMeta">
        <span><span class="refresh-dot"></span>Adatok betÃ¶ltÃ©se...</span>
        <span id="realUpdateTime">â€“</span>
      </div>
      <div class="leaderboard-body" id="realTable">
        <div style="padding:20px; text-align:center; color:#555">BetÃ¶ltÃ©s...</div>
      </div>
    </div>
  </div>

  <!-- AI TÃBLÃZAT -->
  <div id="aiTableContainer" style="display: none;">
    <div class="form-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px">
      <div class="title-section">
        <h2>ğŸ¤– AI becsÃ¼lt tabella <span class="ai-badge">AI</span></h2>
      </div>
      <button class="btn" id="generateAIBtn">âœ¨ AI generÃ¡lÃ¡s</button>
    </div>

    <div class="leaderboard-block">
      <div class="leaderboard-header-bar">
        <span>#</span>
        <span></span>
        <span>Csapat</span>
        <span class="h-right">LÅ‘ttâ€“Kapott</span>
        <span class="h-right">KÃ¼lÃ¶nb.</span>
        <span class="h-right">Pont</span>
      </div>
      <div class="lb-meta" id="aiMeta">
        <span><span class="refresh-dot"></span>AI becslÃ©s</span>
        <span id="aiUpdateTime">â€“</span>
      </div>
      <div class="leaderboard-body" id="aiTable">
        <div style="padding:30px; text-align:center; color:#555">
          Kattints az "AI generÃ¡lÃ¡s" gombra<br>
          <span style="font-size:.6rem; color:#333">A Gemini elemzi a valÃ³s adatokat Ã©s kÃ©szÃ­t egy becslÃ©st</span>
        </div>
      </div>
    </div>

    <!-- AI ElemzÃ©s szÃ¶veges panel -->
    <div class="aipanel" id="aiPanel" style="display:none;">
      <div class="aipanel-hdr">
        <span class="aipanel-title">ğŸ“Š AI ElemzÃ©s</span>
        <span class="ai-badge">gemini-2.5-flash</span>
      </div>
      <div class="aibody" id="aiBody"></div>
    </div>
  </div>

  <div class="error-box" id="errorBox"></div>
</div>

<script>
// âš ï¸ CSERÃ‰LD KI A SAJÃT API KULCSODRA!
const GEMINI_KEY = 'AIzaSyD7j_N6YgsaeOapaLznrRAKtrnUWYvBZro';

// State
let realStandings = [];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 1. SEGÃ‰DFÃœGGVÃ‰NYEK
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function gd(gf, ga) {
    const diff = (gf || 0) - (ga || 0);
    if (diff > 0) return `<span style="color:#4caf50">+${diff}</span>`;
    if (diff < 0) return `<span style="color:#e53935">${diff}</span>`;
    return `<span style="color:#555">0</span>`;
}

function trendHtml(t) {
    if (t === 'up') return '<span class="trend-up">â–²</span>';
    if (t === 'down') return '<span class="trend-down">â–¼</span>';
    return '<span class="trend-same">â€”</span>';
}

function logoHtml(logo) {
    if (!logo) return '<span class="team-logo-placeholder"></span>';
    return `<img class="team-logo" src="${logo}" alt="" loading="lazy" onerror="this.style.display='none'">`;
}

function rowClass(pos, total) {
    if (pos <= 3) return 'lb-row top3';
    if (total && pos > total - 3) return 'lb-row relegation';
    return 'lb-row';
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 2. VALÃ“DI TABELLA BETÃ–LTÃ‰SE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchRealStandings() {
    const response = await fetch('/api/standings?liga=pl');
    if (!response.ok) throw new Error(`API hiba: ${response.status}`);
    const data = await response.json();
    return data.standings || [];
}

function renderRealTable(standings) {
    const table = document.getElementById('realTable');
    const meta = document.getElementById('realMeta');
    const updateTime = document.getElementById('realUpdateTime');
    
    if (!standings || standings.length === 0) {
        table.innerHTML = '<div style="padding:20px; text-align:center; color:#555">Nincs adat</div>';
        return;
    }
    
    const total = standings.length;
    const html = standings.map(r => {
        const cls = rowClass(r.pos, total);
        return `
            <div class="${cls}">
                <span class="col-pos">${r.pos}</span>
                <span class="col-trend">${trendHtml(r.trend ?? 'same')}</span>
                <span class="col-team">${logoHtml(r.logo)}<span class="team-name">${r.team}</span></span>
                <span class="col-goals">${r.goalsFor ?? 'â€“'}:${r.goalsAgainst ?? 'â€“'}</span>
                <span class="col-gd">${gd(r.goalsFor, r.goalsAgainst)}</span>
                <span class="col-pts">${r.pts}</span>
            </div>
        `;
    }).join('');
    
    table.innerHTML = html;
    meta.className = 'lb-meta';
    meta.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>Ã‰lÅ‘ adatok';
    updateTime.textContent = new Date().toLocaleTimeString('hu-HU');
}

async function loadRealTable() {
    const meta = document.getElementById('realMeta');
    meta.className = 'lb-meta loading';
    meta.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>BetÃ¶ltÃ©s...';
    
    try {
        realStandings = await fetchRealStandings();
        renderRealTable(realStandings);
    } catch(e) {
        document.getElementById('errorBox').textContent = `âŒ ${e.message}`;
        document.getElementById('errorBox').classList.add('show');
        meta.className = 'lb-meta error';
        meta.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>Hiba';
    }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 3. AI TABELLA GENERÃLÃSA (JSON-t kÃ©rÃ¼nk a Gemini-tÃ³l)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function generateAITable() {
    const meta = document.getElementById('aiMeta');
    const aiTable = document.getElementById('aiTable');
    const aiPanel = document.getElementById('aiPanel');
    const aiBody = document.getElementById('aiBody');
    const errorBox = document.getElementById('errorBox');
    const updateTime = document.getElementById('aiUpdateTime');
    
    meta.className = 'lb-meta loading';
    meta.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>AI generÃ¡lÃ¡s...';
    aiTable.innerHTML = '<div class="dots"><span></span><span></span><span></span></div>';
    aiPanel.style.display = 'none';
    errorBox.classList.remove('show');
    
    // Ha nincs valÃ³di adat, tÃ¶ltsÃ¼k be elÅ‘bb
    if (realStandings.length === 0) {
        try {
            realStandings = await fetchRealStandings();
        } catch(e) {
            errorBox.textContent = `âŒ Nem sikerÃ¼lt betÃ¶lteni a valÃ³di adatokat: ${e.message}`;
            errorBox.classList.add('show');
            meta.className = 'lb-meta error';
            return;
        }
    }
    
    if (realStandings.length === 0) {
        errorBox.textContent = 'âŒ Nincs adat az elemzÃ©shez';
        errorBox.classList.add('show');
        meta.className = 'lb-meta error';
        return;
    }
    
    // Top 5 Ã©s bottom 5 a promptba
    const top5 = realStandings.slice(0, 5).map(t => 
        `${t.pos}. ${t.team} - ${t.pts} pont (${t.goalsFor||0}:${t.goalsAgainst||0})`
    ).join('\n');
    
    const bottom5 = realStandings.slice(-5).map(t => 
        `${t.pos}. ${t.team} - ${t.pts} pont (${t.goalsFor||0}:${t.goalsAgainst||0})`
    ).join('\n');
    
    // Ã–sszes csapat nÃ©v felsorolÃ¡sa
    const allTeams = realStandings.map(t => t.team).join(', ');
    
    const prompt = `Te egy VirtuÃ¡lis LabdarÃºgÃ¡s Liga (Premier Liga) profi elemzÅ‘je vagy.
A valÃ³s tabella alapjÃ¡n kÃ©szÃ­ts egy ELMÃ‰LETI, AI ÃLTAL ELEMZETT tabellÃ¡t!

VALÃ“S TABELLA (top 5):
${top5}

VALÃ“S TABELLA (utolsÃ³ 5):
${bottom5}

Ã–SSZES CSAPAT: ${allTeams}

Feladatod:
KÃ©szÃ­ts egy ELMÃ‰LETI tabellÃ¡t arrÃ³l, hogy szerinted a kÃ¶vetkezÅ‘ kÃ¶rÃ¶kben melyik csapatok lehetnek a legjobb formÃ¡ban!
A tabella PONTOSAN ugyanolyan formÃ¡tumban kell, hogy legyen, mint a valÃ³s, de az adatok AI becslÃ©sek!

VÃ¡laszolj PONTOSAN ebben a JSON formÃ¡tumban (CSAK ezt add vissza, semmi mÃ¡st!):

[
  {
    "pos": 1,
    "team": "CSAPATNEVE",
    "goalsFor": 35,
    "goalsAgainst": 18,
    "pts": 42,
    "trend": "up",
    "logo": null
  },
  {
    "pos": 2,
    "team": "CSAPATNEVE",
    "goalsFor": 32,
    "goalsAgainst": 20,
    "pts": 38,
    "trend": "same",
    "logo": null
  }
]

FONTOS: 
- HasznÃ¡ld a VALÃ“S csapatneveket a fenti listÃ¡bÃ³l!
- Adj meg reÃ¡lis pontszÃ¡mokat Ã©s gÃ³lokat (a valÃ³sÃ¡g alapjÃ¡n)!
- A trend lehet: "up", "down", vagy "same"
- 16 csapatot adj vissza (1-tÅ‘l 16-ig)!
- CSAK JSON tÃ¶mbÃ¶t adj vissza, semmi magyarÃ¡zatot, semmi mÃ¡st!`;
    
    try {
        const response = await fetch(
            `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyD7j_N6YgsaeOapaLznrRAKtrnUWYvBZro`,
            {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: { 
                        temperature: 0.7,
                        maxOutputTokens: 1024
                    }
                })
            }
        );
        
        if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            console.error('Gemini hiba:', errorData);
            throw new Error(`Gemini API hiba (${response.status})`);
        }
        
        const data = await response.json();
        const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
        
        if (!text) throw new Error('Az AI nem adott vÃ¡laszt');
        
        console.log('Gemini vÃ¡lasz:', text);
        
        // JSON kinyerÃ©se a szÃ¶vegbÅ‘l
        const jsonMatch = text.match(/\[[\s\S]*\]/);
        if (!jsonMatch) throw new Error('Nem talÃ¡lhatÃ³ JSON a vÃ¡laszban');
        
        const aiStandings = JSON.parse(jsonMatch[0]);
        
        // AI tabella megjelenÃ­tÃ©se
        renderAITable(aiStandings);
        
        // ElemzÅ‘ szÃ¶veg generÃ¡lÃ¡sa
        await generateAnalysis(aiStandings);
        
        meta.className = 'lb-meta';
        meta.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>AI becslÃ©s';
        updateTime.textContent = new Date().toLocaleTimeString('hu-HU');
        
    } catch(e) {
        console.error('GenerÃ¡lÃ¡si hiba:', e);
        errorBox.textContent = `âš ï¸ ${e.message}`;
        errorBox.classList.add('show');
        meta.className = 'lb-meta error';
        meta.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>Hiba';
        aiTable.innerHTML = '<div style="padding:30px; text-align:center; color:#555">Hiba tÃ¶rtÃ©nt. PrÃ³bÃ¡ld Ãºjra.</div>';
    }
}

function renderAITable(standings) {
    const table = document.getElementById('aiTable');
    
    if (!standings || standings.length === 0) {
        table.innerHTML = '<div style="padding:20px; text-align:center; color:#555">Nincs AI adat</div>';
        return;
    }
    
    const total = standings.length;
    const html = standings.map(r => {
        const cls = rowClass(r.pos, total);
        return `
            <div class="${cls}">
                <span class="col-pos">${r.pos}</span>
                <span class="col-trend">${trendHtml(r.trend)}</span>
                <span class="col-team">
                    <span class="team-logo-placeholder"></span>
                    <span class="team-name">${r.team}</span>
                </span>
                <span class="col-goals">${r.goalsFor}:${r.goalsAgainst}</span>
                <span class="col-gd">${gd(r.goalsFor, r.goalsAgainst)}</span>
                <span class="col-pts">${r.pts}</span>
            </div>
        `;
    }).join('');
    
    table.innerHTML = html;
}

async function generateAnalysis(standings) {
    const aiPanel = document.getElementById('aiPanel');
    const aiBody = document.getElementById('aiBody');
    
    const top3 = standings.slice(0, 3);
    const bottom3 = standings.slice(-3);
    
    const prompt = `Elemezd rÃ¶viden ezt az AI Ã¡ltal becsÃ¼lt tabellÃ¡t!

TOP 3:
${top3.map(t => `${t.pos}. ${t.team} (${t.pts} pont, ${t.goalsFor}:${t.goalsAgainst})`).join('\n')}

UTOLSÃ“ 3:
${bottom3.map(t => `${t.pos}. ${t.team} (${t.pts} pont, ${t.goalsFor}:${t.goalsAgainst})`).join('\n')}

Adj egy 3-4 mondatos elemzÃ©st MAGYARUL arrÃ³l, hogy szerinted miÃ©rt ezek a csapatok lehetnek a legjobb formÃ¡ban!`;
    
    try {
        const response = await fetch(
            `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyD7j_N6YgsaeOapaLznrRAKtrnUWYvBZro`,
            {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: { temperature: 0.7, maxOutputTokens: 200 }
                })
            }
        );
        
        const data = await response.json();
        const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
        
        if (text) {
            aiBody.innerHTML = text.replace(/\n/g, '<br>');
            aiPanel.style.display = 'block';
        } else {
            aiPanel.style.display = 'none';
        }
        
    } catch(e) {
        console.error('ElemzÃ©si hiba:', e);
        aiPanel.style.display = 'none';
    }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 4. TAB VÃLTÃS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showRealTable() {
    document.getElementById('realTableContainer').style.display = 'block';
    document.getElementById('aiTableContainer').style.display = 'none';
    document.getElementById('realTab').classList.add('active');
    document.getElementById('aiTab').classList.remove('active');
}

function showAITable() {
    document.getElementById('realTableContainer').style.display = 'none';
    document.getElementById('aiTableContainer').style.display = 'block';
    document.getElementById('realTab').classList.remove('active');
    document.getElementById('aiTab').classList.add('active');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 5. INICIALIZÃLÃS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', () => {
    loadRealTable();
    
    document.getElementById('refreshRealBtn').addEventListener('click', loadRealTable);
    document.getElementById('generateAIBtn').addEventListener('click', generateAITable);
    
    // Automatikus frissÃ­tÃ©s 30 mÃ¡sodpercenkÃ©nt (csak a valÃ³di tÃ¡blÃ¡t)
    setInterval(loadRealTable, 30000);
});
</script>

</body>
</html>
