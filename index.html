<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VSPORT ‚Äì √âl≈ë K√∂zvet√≠t√©sek</title>
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { background: #0a0a0a; color: #fff; font-family: 'Segoe UI', sans-serif; min-height: 100vh; }

    header {
      background: #111; border-bottom: 2px solid #222;
      padding: 0 20px; height: 44px;
      display: flex; align-items: center; gap: 10px;
    }
    .dot { width: 9px; height: 9px; border-radius: 50%; background: #fff; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.25} }
    header h1 { font-size:.85rem; font-weight:600; letter-spacing:3px; text-transform:uppercase; color:#ddd; }

    .streams { display:flex; flex-wrap:wrap; gap:20px; padding:28px 20px; justify-content:center; }
    .stream-card { display:flex; flex-direction:column; gap:10px; width:420px; }

    .stream-block { background:#111; border:1px solid #2a2a2a; border-radius:4px; overflow:hidden; }
    .stream-label {
      background:#141414; border-bottom:1px solid #222;
      padding:0 14px; font-size:.65rem; letter-spacing:2px;
      text-transform:uppercase; color:#888;
      display:flex; align-items:center; gap:8px; height:30px;
    }
    .badge { background:#fff; color:#000; font-size:.55rem; font-weight:800; padding:2px 6px; border-radius:2px; letter-spacing:1px; }

    .iframe-wrapper { width:100%; height:225px; overflow:hidden; background:#000; }
    .iframe-wrapper iframe { width:100%; height:100%; border:none; display:block; }

    /* ‚îÄ‚îÄ Leaderboard ‚îÄ‚îÄ */
    .leaderboard-block { background:#111; border:1px solid #2a2a2a; border-radius:4px; overflow:hidden; }

    .leaderboard-header-bar {
      background:#1e6b1e;
      display:grid;
      grid-template-columns: 28px 20px 1fr 70px 52px 40px;
      align-items:center; padding:7px 10px; gap:4px;
    }
    .leaderboard-header-bar span { font-size:.6rem; font-weight:700; color:#fff; text-transform:uppercase; letter-spacing:.3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .leaderboard-header-bar .h-right { text-align:right; }

    .lb-meta {
      background:#0f0f0f; border-bottom:1px solid #1e1e1e;
      padding:4px 10px; font-size:.6rem; color:#444;
      display:flex; justify-content:space-between; align-items:center;
    }
    .refresh-dot { width:5px; height:5px; border-radius:50%; background:#3d8b3d; display:inline-block; margin-right:4px; animation:pulse 2s infinite; }
    .lb-meta.loading .refresh-dot { background:#f59e0b; }
    .lb-meta.error   .refresh-dot { background:#e53935; }

    .leaderboard-body { background:#141414; }

    .lb-row {
      display:grid;
      grid-template-columns: 28px 20px 1fr 70px 52px 40px;
      align-items:center; padding:4px 10px; gap:4px;
      border-bottom:1px solid #1d1d1d; transition:background .12s;
    }
    .lb-row:last-child { border-bottom:none; }
    .lb-row:hover { background:#1c1c1c; }
    .lb-row.top3 { background:#162316; }
    .lb-row.top3:hover { background:#1c2b1c; }
    .lb-row.relegation { background:#1a1010; }
    .lb-row.relegation:hover { background:#231414; }

    .col-pos { font-size:.7rem; font-weight:700; color:#666; text-align:center; }
    .lb-row.top3 .col-pos { color:#4caf50; }
    .lb-row.relegation .col-pos { color:#e53935; }

    .col-trend { display:flex; align-items:center; justify-content:center; }
    .trend-up   { color:#4caf50; font-size:.55rem; }
    .trend-down { color:#e53935; font-size:.55rem; }
    .trend-same { color:#333;    font-size:.55rem; }

    .col-team { display:flex; align-items:center; gap:6px; }
    .team-logo { width:16px; height:16px; object-fit:contain; flex-shrink:0; }
    .team-logo-placeholder { width:16px; height:16px; flex-shrink:0; }
    .team-name { font-size:.76rem; font-weight:600; color:#ccc; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .col-goals { font-size:.68rem; color:#666; text-align:right; font-variant-numeric:tabular-nums; }
    .col-gd { font-size:.65rem; color:#555; text-align:right; font-variant-numeric:tabular-nums; }
    .col-pts { font-size:.8rem; font-weight:800; color:#fff; text-align:right; font-variant-numeric:tabular-nums; }

    /* divider vonal top4 ut√°n */
    .lb-row.divider-bottom { border-bottom:2px solid #1e6b1e44; }

    /* Skeleton */
    .lb-skeleton { padding:8px 10px; display:flex; flex-direction:column; gap:5px; }
    .skel-row { height:20px; border-radius:3px; background:linear-gradient(90deg,#1a1a1a 25%,#222 50%,#1a1a1a 75%); background-size:200% 100%; animation:shimmer 1.2s infinite; }
    @keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

    /* Maintenance */
    .maintenance-notice { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:10px; padding:36px 20px; text-align:center; background:#0d0d0d; }
    .maintenance-notice .icon { font-size:1.8rem; opacity:.4; }
    .maintenance-notice p { max-width:260px; line-height:1.7; font-size:.78rem; color:#555; }
    .maintenance-notice strong { color:#f59e0b; }

    /* Source badge */
    .source-badge { font-size:.55rem; padding:1px 5px; border-radius:2px; background:#1a1a1a; color:#444; }
    .source-badge.live { background:#0d2b0d; color:#3d8b3d; }

    /* Schedule btn */
    .schedule-btn {
      display:block; width:100%; padding:10px 16px;
      background:#1a1a1a; border:1px solid #333; border-radius:4px;
      color:#ccc; font-size:.78rem; text-align:center; text-decoration:none;
      transition:background .2s,border-color .2s,color .2s;
    }
    .schedule-btn:hover { background:#242424; border-color:#555; color:#fff; }
    .schedule-btn strong { color:#fff; }
    .schedule-btn:visited { background:#111; border-color:#222; color:#666; }
    .schedule-btn:visited strong { color:#888; }
    .schedule-btn:visited::after { content:' (megtekintve)'; font-size:.65rem; color:#4caf50; }

    @media (max-width:520px) {
      .streams { padding:16px 12px; gap:16px; }
      .stream-card { width:100%; }
    }
  </style>
</head>
<body>

<header>
  <div class="dot"></div>
  <h1>VSPORT &mdash; √âl≈ë</h1>
</header>

<div class="streams">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PREMIER LIGA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="stream-card">
    <div class="stream-block">
      <div class="stream-label">
        <span class="badge">LIVE</span>
        Premier Liga
      </div>
      <div class="iframe-wrapper">
        <iframe src="https://vfscigaming.aitcloud.de/vflmshop/retail/index?clientid=4997&lang=zh&style=scigamingcdn&screen=betradar_vflm_one_screen&channel=0"
          allowfullscreen allow="autoplay; fullscreen" scrolling="no"></iframe>
      </div>
    </div>

    <div class="leaderboard-block">
      <div class="leaderboard-header-bar">
        <span>#</span>
        <span></span>
        <span>Csapat</span>
        <span class="h-right">G√≥l</span>
        <span class="h-right">GK</span>
        <span class="h-right">Pt</span>
      </div>
      <div class="lb-meta loading" id="pl-meta">
        <span><span class="refresh-dot"></span>Bet√∂lt√©s...</span>
        <span id="pl-time">‚Äì</span>
      </div>
      <div class="leaderboard-body" id="pl-table">
        <div class="lb-skeleton">
          <div class="skel-row"></div><div class="skel-row"></div>
          <div class="skel-row"></div><div class="skel-row"></div>
          <div class="skel-row"></div><div class="skel-row"></div>
          <div class="skel-row"></div><div class="skel-row"></div>
        </div>
      </div>
    </div>

    <a class="schedule-btn"
       href="https://vfscigaming.aitcloud.de/vflmshop/retail/index?clientid=4997&lang=zh&style=scigamingcdn&screen=betradar_vflm_one_screen&channel=0"
       target="_blank">
      üî¥ √âl≈ë k√∂zvet√≠t√©s ‚Äì <strong>Premier Liga</strong> ‚Üí
    </a>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SPANYOL LIGA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="stream-card">
    <div class="stream-block">
      <div class="stream-label">
        <span class="badge">LIVE</span>
        Spanyol Liga
      </div>
      <div class="iframe-wrapper">
        <iframe src="https://vflive-vs001.akamaized.net/vflmshopsts/retail/index?clientid=5027&lang=zh&screen=scigaming_vflm_one_screen_sts_scout&style=scigamingcdn&channel=0"
          allowfullscreen allow="autoplay; fullscreen" scrolling="no"></iframe>
      </div>
    </div>

    <div class="leaderboard-block">
      <div class="leaderboard-header-bar">
        <span>#</span>
        <span></span>
        <span>Csapat</span>
        <span class="h-right">G√≥l</span>
        <span class="h-right">GK</span>
        <span class="h-right">Pt</span>
      </div>
      <div class="leaderboard-body">
        <div class="maintenance-notice">
          <div class="icon">üîß</div>
          <p>A <strong>Spanyol Liga eredm√©nyt√°bl√°ja</strong> jelenleg <strong>karbantart√°s alatt</strong> van.<br><br>Hamarosan visszat√©r!</p>
        </div>
      </div>
    </div>

    <a class="schedule-btn"
       href="https://vflive-vs001.akamaized.net/vflmshopsts/retail/index?clientid=5027&lang=zh&screen=scigaming_vflm_one_screen_sts_scout&style=scigamingcdn&channel=0"
       target="_blank">
      üî¥ √âl≈ë k√∂zvet√≠t√©s ‚Äì <strong>Spanyol Liga</strong> ‚Üí
    </a>
  </div>

</div>

<script>
  const REFRESH_MS = 10_000;
  const isDebug = new URLSearchParams(location.search).has('debug');

  function gd(gf, ga) {
    const diff = (gf || 0) - (ga || 0);
    if (diff > 0) return `<span style="color:#4caf50">+${diff}</span>`;
    if (diff < 0) return `<span style="color:#e53935">${diff}</span>`;
    return `<span style="color:#555">0</span>`;
  }

  function trendHtml(t) {
    if (t === 'up')   return '<span class="trend-up">‚ñ≤</span>';
    if (t === 'down') return '<span class="trend-down">‚ñº</span>';
    return '<span class="trend-same">‚Äî</span>';
  }

  function logoHtml(logo) {
    if (!logo) return '<span class="team-logo-placeholder"></span>';
    return `<img class="team-logo" src="${logo}" alt="" loading="lazy" onerror="this.style.display='none'">`;
  }

  function rowClass(pos, total) {
    if (pos <= 3) return 'lb-row top3' + (pos === 4 ? '' : pos === 3 ? ' divider-bottom' : '');
    if (total && pos > total - 3) return 'lb-row relegation';
    return 'lb-row';
  }

  function renderRows(data) {
    const total = data.length;
    return data.map(r => {
      const cls = r.pos <= 3
        ? 'lb-row top3' + (r.pos === 3 ? ' divider-bottom' : '')
        : r.pos >= total - 2 ? 'lb-row relegation'
        : 'lb-row';

      return `
        <div class="${cls}">
          <span class="col-pos">${r.pos}</span>
          <span class="col-trend">${trendHtml(r.trend ?? 'same')}</span>
          <span class="col-team">${logoHtml(r.logo)}<span class="team-name">${r.team}</span></span>
          <span class="col-goals">${r.goalsFor ?? '‚Äì'}:${r.goalsAgainst ?? '‚Äì'}</span>
          <span class="col-gd">${gd(r.goalsFor, r.goalsAgainst)}</span>
          <span class="col-pts">${r.pts}</span>
        </div>`;
    }).join('');
  }

  function nowStr() {
    return new Date().toLocaleTimeString('hu-HU', {hour:'2-digit',minute:'2-digit',second:'2-digit'});
  }

  async function loadStandings(liga) {
    const tableEl = document.getElementById(`${liga}-table`);
    const metaEl  = document.getElementById(`${liga}-meta`);
    const timeEl  = document.getElementById(`${liga}-time`);

    metaEl.className = 'lb-meta loading';
    metaEl.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>Friss√≠t√©s...';

    try {
      const url = `/api/standings?liga=${liga}${isDebug ? '&debug=1' : ''}`;
      const res  = await fetch(url);
      const json = await res.json();

      if (isDebug) console.log(`[VSPORT] ${liga}:`, json);

      if (json.standings && json.standings.length > 0) {
        tableEl.innerHTML = renderRows(json.standings);
        const isLive = json.source === 'scrape';
        metaEl.className = 'lb-meta' + (isLive ? '' : ' loading');
        metaEl.querySelector('span:first-child').innerHTML =
          `<span class="refresh-dot"></span>${isLive ? '√âl≈ë' : 'Offline adat'}`;
      } else {
        tableEl.innerHTML = `<div class="maintenance-notice" style="padding:20px"><div class="icon" style="font-size:1.2rem">üì≠</div><p style="color:#444">Nincs adat. √öjrapr√≥b√°lkoz√°s ${REFRESH_MS/1000}mp m√∫lva.</p></div>`;
        metaEl.className = 'lb-meta error';
        metaEl.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>Sikertelen';
      }

      if (timeEl) timeEl.textContent = nowStr();
    } catch (err) {
      if (isDebug) console.error(`[VSPORT] fetch error:`, err);
      tableEl.innerHTML = `<div style="padding:14px 10px;font-size:.72rem;color:#555">H√°l√≥zati hiba: ${err.message}</div>`;
      metaEl.className = 'lb-meta error';
      metaEl.querySelector('span:first-child').innerHTML = '<span class="refresh-dot"></span>Hiba';
      if (timeEl) timeEl.textContent = nowStr();
    }
  }

  loadStandings('pl');
  setInterval(() => loadStandings('pl'), REFRESH_MS);
</script>

</body>
</html>
